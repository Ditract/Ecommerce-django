{% extends "base.html" %}
{% load static %}
{% load thumbnail %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'pages/css/styles.css' %}">
{% endblock %}

{% block content %}
<!-- SLIDER -->
<section class="inicio-slider container-fluid p-0">
  {% for slide in slides %}
  <div class="slide-item {% if forloop.first %}active{% endif %}">
    {% if slide.imagen %}
      {% thumbnail slide.imagen "1200x600" crop="center" as im %}
        <img src="{{ im.url }}" loading="lazy" alt="{{ slide.title|default:'Slide' }}" class="img-fluid w-100">
      {% endthumbnail %}
    {% endif %}
    <div class="slide-text text-center position-absolute">
      {% if slide.description %}
        <p class="text-sm">{{ slide.description }}</p>
      {% endif %}
      {% if slide.title %}
        <h2 class="text-uppercase text-accent font-bold">{{ slide.title }}</h2>
      {% endif %}
    </div>
  </div>
  {% empty %}
  <div class="text-center p-3">
    <p>No hay slides disponibles.</p>
  </div>
  {% endfor %}
  <button class="slider-btn prev-btn btn btn-custom" aria-label="Anterior">&#10094;</button>
  <button class="slider-btn next-btn btn btn-custom" aria-label="Siguiente">&#10095;</button>
</section>

<!-- CATEGORÍAS -->
<section class="inicio-categorias container py-4">
  <div class="row g-4">
    <div class="col-md-6">
      <div class="categoria-box position-relative overflow-hidden rounded-md shadow-md">
        <img src="{% static 'img/hombre_seccion.jpg' %}" alt="Hombre" class="img-fluid w-100">
        <a href="{% url 'productos_genero' 'hombre' %}" class="categoria-enlace btn btn-custom position-absolute">Hombre</a>
      </div>
    </div>
    <div class="col-md-6">
      <div class="categoria-box position-relative overflow-hidden rounded-md shadow-md">
        <img src="{% static 'img/mujer_seccion.jpg' %}" alt="Mujer" class="img-fluid w-100">
        <a href="{% url 'productos_genero' 'mujer' %}" class="categoria-enlace btn btn-custom position-absolute">Mujer</a>
      </div>
    </div>
  </div>
</section>

<!-- ÚLTIMOS PRODUCTOS AGREGADOS -->
<section class="inicio-productos container py-4">
  <h2 class="titulo-productos text-center mb-4 text-uppercase text-accent font-bold">Últimos agregados...</h2>
  <div class="row g-4 productos-grid">
    {% for producto in ultimos_4_productos %}
    <div class="col-md-3 col-6">
      <a href="{% url 'detalles_producto' producto.slug %}" class="producto-card product-card h-100 text-decoration-none">
        {% thumbnail producto.image "300x200" crop="center" as im %}
          <img src="{{ im.url }}" loading="lazy" alt="{{ producto.name }}" class="card-img-top">
        {% endthumbnail %}
        <div class="card-body text-center">
          <p class="producto-nombre card-title mb-2">{{ producto.name }}</p>
          <p class="producto-precio card-text text-accent">{{ producto.price }} €</p>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</section>

{% endblock %}

{% block extra_js %}
  <script src="{% static 'pages/js/index.js' %}"></script>
{% endblock extra_js %}